{"version":3,"sources":["MintButton/Mintzy.tsx","Login/PENALDO.png","Login/Login.tsx","Profile/Profile.tsx","App/PENALDO.png","App/App.tsx","index.tsx"],"names":["Mintzy","_useState","useState","_useState2","_slicedToArray","_jsx","className","children","_jsxs","web3","undefined","Login","_ref","onLoggedIn","loading","setLoading","handleAuthenticate","_ref2","publicAddress","signature","fetch","concat","process","body","JSON","stringify","headers","method","then","response","json","handleSignMessage","_ref4","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref3","nonce","wrap","_context","prev","next","eth","personal","sign","sent","abrupt","t0","Error","stop","_x","apply","arguments","handleSignup","handleClick","_ref5","_callee2","coinbase","_context2","window","ethereum","alert","enable","Web3","getCoinbase","toLowerCase","users","length","catch","err","src","logo","onClick","Profile","auth","onLoggedOut","user","username","state","setState","useEffect","accessToken","id","jwtDecode","payload","Authorization","_objectSpread","LS_KEY","App","ls","localStorage","getItem","parse","_Fragment","alt","removeItem","setItem","dotEnvConfig","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a29f637b.chunk.js","sourcesContent":["/* eslint-disable prettier/prettier */\nimport React, { useState } from 'react';\nimport Web3 from 'web3';\nimport MintButton from './MintButton';\nimport './Mintzy.css';\n\n\n// Connect to Metamask\nconst connectMetamask = async () => {\n  const ethereum = (window as any).ethereum;\n  await ethereum.request({ method: 'eth_requestAccounts' });\n\n  const web3 = new Web3(ethereum);\n  return web3;\n};\n\nconst Mintzy: React.FC = () => {\n  const [web3, setWeb3] = useState<Web3 | null>(null);\n\n  const handleConnect = async () => {\n    const connectedWeb3 = await connectMetamask();\n    setWeb3(connectedWeb3);\n  };\n\n  return (\n    <div className='mintzy' >\n            <div className=\"container\">\n        <div className=\"box box1\">\n            <h2>PLACE A BET</h2>\n           <button className='buttonz' >GO</button>\n        </div>\n        <div className=\"box box2\">\n            <h2>PLAY 2 EARN</h2>\n           <button className='buttonz' >GO</button>\n        </div>\n        <div className=\"box box3\">\n            <h2>STAKING</h2>\n           <button className='buttonz' >GO</button>\n        </div>\n    </div>\n    </div>\n  );\n};\n\nexport default Mintzy;\n","export default __webpack_public_path__ + \"static/media/PENALDO.98d36470.png\";","/* eslint-disable prettier/prettier */\nimport './Login.css';\n\nimport React, { useState } from 'react';\nimport Web3 from 'web3';\nimport logo from './PENALDO.png';\nimport { Auth } from '../types';\n\ninterface Props {\n\tonLoggedIn: (auth: Auth) => void;\n}\n\nlet web3: Web3 | undefined = undefined; // Will hold the web3 instance\n\nexport const Login = ({ onLoggedIn }: Props): JSX.Element => {\n\tconst [loading, setLoading] = useState(false); // Loading button state\n\n\tconst handleAuthenticate = ({\n\t\tpublicAddress,\n\t\tsignature,\n\t}: {\n\t\tpublicAddress: string;\n\t\tsignature: string;\n\t}) =>\n\t\tfetch(`${process.env.REACT_APP_BACKEND_URL}/auth`, {\n\t\t\tbody: JSON.stringify({ publicAddress, signature }),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tmethod: 'POST',\n\t\t}).then((response) => response.json());\n\n\tconst handleSignMessage = async ({\n\t\tpublicAddress,\n\t\tnonce,\n\t}: {\n\t\tpublicAddress: string;\n\t\tnonce: string;\n\t}) => {\n\t\ttry {\n\t\t\tconst signature = await web3!.eth.personal.sign(\n\t\t\t\t`I am signing my one-time nonce: ${nonce}`,\n\t\t\t\tpublicAddress,\n\t\t\t\t'' // MetaMask will ignore the password argument here\n\t\t\t);\n\n\t\t\treturn { publicAddress, signature };\n\t\t} catch (err) {\n\t\t\tthrow new Error(\n\t\t\t\t'You need to sign the message to be able to log in.'\n\t\t\t);\n\t\t}\n\t};\n\n\tconst handleSignup = (publicAddress: string) =>\n\t\tfetch(`${process.env.REACT_APP_BACKEND_URL}/users`, {\n\t\t\tbody: JSON.stringify({ publicAddress }),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tmethod: 'POST',\n\t\t}).then((response) => response.json());\n\n\tconst handleClick = async () => {\n\t\t// Check if MetaMask is installed\n\t\tif (!(window as any).ethereum) {\n\t\t\twindow.alert('Please install MetaMask first.');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!web3) {\n\t\t\ttry {\n\t\t\t\t// Request account access if needed\n\t\t\t\tawait (window as any).ethereum.enable();\n\n\t\t\t\t// We don't know window.web3 version, so we use our own instance of Web3\n\t\t\t\t// with the injected provider given by MetaMask\n\t\t\t\tweb3 = new Web3((window as any).ethereum);\n\t\t\t} catch (error) {\n\t\t\t\twindow.alert('You need to allow MetaMask.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst coinbase = await web3.eth.getCoinbase();\n\t\tif (!coinbase) {\n\t\t\twindow.alert('Please activate MetaMask first.');\n\t\t\treturn;\n\t\t}\n\n\t\tconst publicAddress = coinbase.toLowerCase();\n\t\tsetLoading(true);\n\n\t\t// Look if user with current publicAddress is already present on backend\n\t\tfetch(\n\t\t\t`${process.env.REACT_APP_BACKEND_URL}/users?publicAddress=${publicAddress}`\n\t\t)\n\t\t\t.then((response) => response.json())\n\t\t\t// If yes, retrieve it. If no, create it.\n\t\t\t.then((users) =>\n\t\t\t\tusers.length ? users[0] : handleSignup(publicAddress)\n\t\t\t)\n\t\t\t// Popup MetaMask confirmation modal to sign message\n\t\t\t.then(handleSignMessage)\n\t\t\t// Send signature to backend on the /auth route\n\t\t\t.then(handleAuthenticate)\n\t\t\t// Pass accessToken back to parent component (to save it in localStorage)\n\t\t\t.then(onLoggedIn)\n\t\t\t.catch((err) => {\n\t\t\t\twindow.alert(err);\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className='page' >\n\n\t\t\t<div  >\n\t\t\t<img src={logo} className='pic' />\n\t\t\t\n\t\t\t<button className=\"Login-button Login-mm\" onClick={handleClick}>\n\t\t\t\t{loading ? 'Loading...' : 'Web3 Login'}\n\t\t\t</button>\n\t\t\t</div>\n\t\t<div>\n\t\t\t\n\t\t\t</div>\t\n\n\n\t\n\t\t</div>\n\t);\n};\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable prettier/prettier */\nimport './Profile.css';\nimport jwtDecode from 'jwt-decode';\nimport React, { useState, useEffect } from 'react';\nimport Blockies from 'react-blockies';\nimport { Auth } from '../types';\nimport Web3 from 'web3';\n\n\ninterface Props {\n\tauth: Auth;\n\tonLoggedOut: () => void;\n}\n\ninterface State {\n\tloading: boolean;\n\tuser?: {\n\t\tid: number;\n\t\tusername: string;\n\t};\n\tusername: string;\n}\n\ninterface JwtDecoded {\n\tpayload: {\n\t\tid: string;\n\t\tpublicAddress: string;\n\t};\n}\n\nexport const Profile = ({ auth, onLoggedOut, }: Props): JSX.Element => {\n\tconst [state, setState] = useState<State>({\n\t\tloading: false,\n\t\tuser: undefined,\n\t\tusername: '',\n\t});\n\n\tuseEffect(() => {\n\t\tconst { accessToken } = auth;\n\t\tconst {\n\t\t\tpayload: { id },\n\t\t} = jwtDecode<JwtDecoded>(accessToken);\n\n\t\tfetch(`${process.env.REACT_APP_BACKEND_URL}/users/${id}`, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${accessToken}`,\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((user) => setState({ ...state, user }))\n\t\t\t.catch(window.alert);\n\t}, []);\n\n\tconst handleChange = ({\n\t\ttarget: { value },\n\t}: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetState({ ...state, username: value });\n\t};\n\n\tconst handleSubmit = () => {\n\t\tconst { accessToken } = auth;\n\t\tconst { user, username } = state;\n\n\t\tsetState({ ...state, loading: true });\n\n\t\tif (!user) {\n\t\t\twindow.alert(\n\t\t\t\t'The user id has not been fetched yet. Please try again in 5 seconds.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tfetch(`${process.env.REACT_APP_BACKEND_URL}/users/${user.id}`, {\n\t\t\tbody: JSON.stringify({ username }),\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${accessToken}`,\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tmethod: 'PATCH',\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((user) => setState({ ...state, loading: false, user }))\n\t\t\t.catch((err) => {\n\t\t\t\twindow.alert(err);\n\t\t\t\tsetState({ ...state, loading: false });\n\t\t\t});\n\t};\n\n\tconst { accessToken } = auth;\n\n\tconst {\n\t\tpayload: { publicAddress },\n\t} = jwtDecode<JwtDecoded>(accessToken);\n\n\tconst { loading, user } = state;\n\n\tconst username = user && user.username;\n\n\n\n\treturn (\n\t\t<div className=\"Profile \">\n\t\t\t\n\n\t\t\t\n\t\t\t<div className=\"names\" >\n\n\t\t\t\t{username ? <pre>{username}</pre> : ''}{' '}\n\t\t\t\t<pre></pre>\n\t\t\t</div>\n\n\t\t\t\n\t\t\t<p>\n\t\t\t\t<button className=\"Login-button Login-mm\" onClick={onLoggedOut}>Logout</button>\n\t\t\t</p>\n\t\n\t\t</div>\n\t);\n};\n","export default __webpack_public_path__ + \"static/media/PENALDO.98d36470.png\";","/* eslint-disable prettier/prettier */\nimport './App.css';\n\nimport React, { useEffect, useState } from 'react';\nimport Mintzy from '../MintButton/Mintzy'\nimport { Login } from '../Login';\nimport { Profile } from '../Profile/Profile';\nimport { Auth } from '../types';\nimport logo from './PENALDO.png';\nimport Web3 from 'web3';\n\nconst LS_KEY = 'login-with-metamask:auth';\n\ninterface State {\n\tauth?: Auth;\n}\n\nexport const App = (): JSX.Element => {\n\tconst [state, setState] = useState<State>({});\n\n\tuseEffect(() => {\n\t\t// Access token is stored in localstorage\n\t\tconst ls = window.localStorage.getItem(LS_KEY);\n\t\tconst auth = ls && JSON.parse(ls);\n\t\tsetState({ auth });\n\t}, []);\n\n\tconst handleLoggedIn = (auth: Auth) => {\n\t\tlocalStorage.setItem(LS_KEY, JSON.stringify(auth));\n\t\tsetState({ auth });\n\t};\n\n\tconst handleLoggedOut = () => {\n\t\tlocalStorage.removeItem(LS_KEY);\n\t\tsetState({ auth: undefined });\n\t};\n\n\tconst { auth } = state;\n\n\treturn (\n\t\t<div className=\"App\">\n\n\t\t\t<div className=\"App-intro\">\n\t\t\t\t{auth ? (\n\t              \t<>\t\t\t\n\t\t\t\t\t<header className=\"App-header\">\n\t\t\t\t\t\t<img src={logo} className=\"App-logo\" alt=\"logo\" />\n\t\t\t\t\t\t<div className='App-title' > SPORTS </div>\n\t\t\t\t\t\t<div className='App-title' > LIVE </div>\n\t\t\t\t\t<div className='App-title' > E-SPORTS </div>\n\t\t\t\t\t\t<div className='App-title' > BONUS </div>\n\t\t\n\t\t\t\t\t</header>\n\t\t\t\t\t<Profile auth={auth} onLoggedOut={handleLoggedOut} />\n\t\t\t\t\t<Mintzy />\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\t<>\n\n\t\t\t\t\t\t<Login onLoggedIn={handleLoggedIn} /></>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import './index.css';\n\nimport { config as dotEnvConfig } from 'dotenv';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\n// Load ENV variables\ndotEnvConfig({\n\tpath:\n\t\tprocess.env.NODE_ENV === 'production'\n\t\t\t? '.env.production'\n\t\t\t: '.env.development',\n});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}